# Base installations here: https://code.uberinternal.com/diffusion/OBUBUCD/browse/master/templates/.
schema_version: 2.0.0
service_name: deeplearning_sanyam_cgp
service_type: template
distribution: stretch
template:
  family: michelangelo
  name: uber-dl-gpu-1.2
  pre_build_cmds:
    - RUN pip3 install -U numpy tqdm fire tensorboard ruamel.yaml wandb
    - RUN pip3 install -U 'torch==1.4.0+cu100' 'torchvision==0.5.0+cu100' -f https://download.pytorch.org/whl/torch_stable.html
    - RUN pip3 install -U torch_optimizer
  build_cmds: []
  post_build_cmds:
    - ENV MNT_DIR=/mnt/share/sanyam PYTHONPATH=/mnt/share/sanyam/src/continual_gp:${PYTHONPATH}
    - RUN mkdir -p ${HOME}/wandb
applications:
  - app_type: command_line
    command_line:
      run_cmd: 'sleep 0'
    health_check: none
    udeploy_app_id: deeplearning_sanyam_cgp
